(function(){function d(a){this._tail=this._head=0;this._capacityMask=3;this._list=Array(4);Array.isArray(a)&&this._fromArray(a)}d.prototype.peekAt=function(a){if(a===(a|0)){var c=this.size();if(!(a>=c||a<-c))return 0>a&&(a+=c),a=this._head+a&this._capacityMask,this._list[a]}};d.prototype.get=function(a){return this.peekAt(a)};d.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};d.prototype.peekFront=function(){return this.peek()};d.prototype.peekBack=function(){return this.peekAt(-1)};
Object.defineProperty(d.prototype,"length",{get:function(){return this.size()}});d.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};d.prototype.unshift=function(a){if(void 0===a)return this.size();this._head=this._head-1+this._list.length&this._capacityMask;this._list[this._head]=a;this._tail===this._head&&this._growArray();return this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-
this._tail)};d.prototype.shift=function(){var a=this._head;if(a!==this._tail){var c=this._list[a];this._list[a]=void 0;this._head=a+1&this._capacityMask;2>a&&1E4<this._tail&&this._tail<=this._list.length>>>2&&this._shrinkArray();return c}};d.prototype.push=function(a){if(void 0===a)return this.size();var c=this._tail;this._list[c]=a;this._tail=c+1&this._capacityMask;this._tail===this._head&&this._growArray();return this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};
d.prototype.pop=function(){var a=this._tail;if(a!==this._head){var c=this._list.length;this._tail=a-1+c&this._capacityMask;var b=this._list[this._tail];this._list[this._tail]=void 0;2>this._head&&1E4<a&&a<=c>>>2&&this._shrinkArray();return b}};d.prototype.removeOne=function(a){var c=a;if(c===(c|0)&&this._head!==this._tail){var b=this.size(),d=this._list.length;if(!(c>=b||c<-b)){0>c&&(c+=b);c=this._head+c&this._capacityMask;var e=this._list[c];if(a<b/2){for(;0<a;a--)this._list[c]=this._list[c=c-1+
d&this._capacityMask];this._list[c]=void 0;this._head=this._head+1+d&this._capacityMask}else{for(a=b-1-a;0<a;a--)this._list[c]=this._list[c=c+1+d&this._capacityMask];this._list[c]=void 0;this._tail=this._tail-1+d&this._capacityMask}return e}}};d.prototype.remove=function(a,c){var b=a,d=c;if(b===(b|0)&&this._head!==this._tail){var e=this.size(),g=this._list.length;if(!(b>=e||b<-e||1>c)){0>b&&(b+=e);if(1===c||!c){var h=Array(1);h[0]=this.removeOne(b);return h}if(0===b&&b+c>=e)return h=this.toArray(),
this.clear(),h;b+c>e&&(c=e-b);var f;h=Array(c);for(f=0;f<c;f++)h[f]=this._list[this._head+b+f&this._capacityMask];b=this._head+b&this._capacityMask;if(a+c===e){this._tail=this._tail-c+g&this._capacityMask;for(f=c;0<f;f--)this._list[b=b+1+g&this._capacityMask]=void 0;return h}if(0===a){this._head=this._head+c+g&this._capacityMask;for(f=c-1;0<f;f--)this._list[b=b+1+g&this._capacityMask]=void 0;return h}if(b<e/2){this._head=this._head+a+c+g&this._capacityMask;for(f=a;0<f;f--)this.unshift(this._list[b=
b-1+g&this._capacityMask]);for(b=this._head-1+g&this._capacityMask;0<d;)this._list[b=b-1+g&this._capacityMask]=void 0,d--;0>a&&(this._tail=b)}else{this._tail=b;b=b+c+g&this._capacityMask;for(f=e-(c+a);0<f;f--)this.push(this._list[b++]);for(b=this._tail;0<d;)this._list[b=b+1+g&this._capacityMask]=void 0,d--}2>this._head&&1E4<this._tail&&this._tail<=g>>>2&&this._shrinkArray();return h}}};d.prototype.splice=function(a,c){var b=a;if(b===(b|0)){var d=this.size();0>b&&(b+=d);if(!(b>d)){if(2<arguments.length){var e,
g=arguments.length,h=this._list.length,f=2;if(!d||b<d/2){var k=Array(b);for(e=0;e<b;e++)k[e]=this._list[this._head+e&this._capacityMask];if(0===c){var l=[];0<b&&(this._head=this._head+b+h&this._capacityMask)}else l=this.remove(b,c),this._head=this._head+b+h&this._capacityMask;for(;g>f;)this.unshift(arguments[--g]);for(e=b;0<e;e--)this.unshift(k[e-1])}else{k=Array(d-(b+c));var m=k.length;for(e=0;e<m;e++)k[e]=this._list[this._head+b+c+e&this._capacityMask];0===c?(l=[],b!=d&&(this._tail=this._head+b+
h&this._capacityMask)):(l=this.remove(b,c),this._tail=this._tail-m+h&this._capacityMask);for(;f<g;)this.push(arguments[f++]);for(e=0;e<m;e++)this.push(k[e])}return l}return this.remove(b,c)}}};d.prototype.clear=function(){this._tail=this._head=0};d.prototype.isEmpty=function(){return this._head===this._tail};d.prototype.toArray=function(){return this._copyArray(!1)};d.prototype._fromArray=function(a){for(var c=0;c<a.length;c++)this.push(a[c])};d.prototype._copyArray=function(a){var c=[],b=this._list,
d=b.length;if(a||this._head>this._tail){for(a=this._head;a<d;a++)c.push(b[a]);a=0}else a=this._head;for(;a<this._tail;a++)c.push(b[a]);return c};d.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0);this._tail=this._list.length;this._list.length*=2;this._capacityMask=this._capacityMask<<1|1};d.prototype._shrinkArray=function(){this._list.length>>>=1;this._capacityMask>>>=1};window.Denque=d})();
